<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Google Merchant Center Product Feed Validator</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">G</div>
      <div class="titles">
        <h1>Google Merchant Center Product Feed Validator</h1>
        <p class="tagline">Validate JSON / CSV feeds against US/EN GMC spec. Exact headers. Checks formatting, enums, and rule dependencies.</p>
      </div>
    </div>
    <nav class="top-links">
      <a href="#spec">Spec</a>
      <a href="https://support.google.com/merchants/answer/7052112" target="_blank" rel="noopener">GMC Docs</a>
      <a href="https://www.linkedin.com/in/brandonlazovic/" target="_blank" rel="noopener">LinkedIn</a>
    </nav>
  </header>

  <main class="container">
    <section class="hero card">
      <div class="hero-meta">
        <span class="pill">≤ 50 000 rows per run</span>
        <span class="pill">JSON / CSV</span>
        <span class="pill">Checks formatting, enums, & dependencies</span>
      </div>
      <h2>Validate your product feed</h2>
      <p>Upload a JSON array or CSV with headers. We check required vs recommended fields and rule dependencies for the Google Merchant Center spec.</p>

      <div class="toggle-tabs" role="tablist">
        <button class="toggle active" data-tab="validate" role="tab">Validate</button>
        <button class="toggle" data-tab="spec" role="tab">Spec & Requirements</button>
      </div>

      <div class="panel panel-validate" data-panel="validate">
        <div class="steps">
          <div class="step active"><span>1</span><small>Add File</small></div>
          <div class="step"><span>2</span><small>Validate</small></div>
          <div class="step"><span>3</span><small>Review & Export</small></div>
        </div>

        <div class="controls">
          <label>Profile
            <select class="profile-select">
              <option value="general">General</option>
              <option value="apparel">Apparel (US)</option>
              <option value="local_inventory">Local Inventory (US)</option>
            </select>
          </label>
        </div>

        <div id="dropZone" class="dropzone" tabindex="0" aria-label="Drag & drop your feed or browse">
          <div class="dz-inner">
            <div class="dz-ghost">Drag & drop your feed</div>
            <button id="browseBtn" class="btn ghost" type="button">Browse files</button>
            <div id="fileName" class="file-name">No file selected yet.</div>
          </div>
          <input id="fileInput" type="file" accept=".csv,.json" hidden />
        </div>

        <div class="actions">
          <details class="advanced">
            <summary>Advanced (delimiter / encoding)</summary>
            <div class="advanced-body">
              <label>Delimiter <input id="delimiter" placeholder="auto" /></label>
              <label>Encoding <input id="encoding" placeholder="utf-8" /></label>
            </div>
          </details>
          <div class="action-buttons">
            <button id="runCsv" class="btn primary">Validate CSV</button>
            <button id="runJson" class="btn">Validate JSON</button>
            <a class="btn ghost" href="samples/gmc-valid.json" download>Download sample JSON</a>
            <a class="btn ghost" href="samples/gmc-broken.csv" download>Sample CSV (issues)</a>
            <a class="btn ghost" href="samples/gmc-valid-general.csv" download>Sample CSV</a>
          </div>
        </div>

        <div class="results card">
          <h3>Results</h3>
          <div class="result-columns">
            <div>
              <h4>Errors</h4>
              <div id="results-errors" class="issues"></div>
            </div>
            <div>
              <h4>Warnings</h4>
              <div id="results-warnings" class="issues"></div>
            </div>
            <div>
              <h4>Opportunities</h4>
              <div id="results-opps" class="issues"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="panel panel-spec" data-panel="spec" hidden>
        <div class="spec-grid">
          <article class="spec-card">
            <h4>Basic product data <span class="req">Required</span></h4>
            <p><code>id</code>, <code>title</code>, <code>description</code>, <code>link</code>, <code>image_link</code>, <code>availability</code>, <code>price</code></p>
            <ul>
              <li>title ≤ 150, description ≤ 5000</li>
              <li>availability ∈ in_stock / out_of_stock / preorder / backorder</li>
              <li>price format: <code>15.00 USD</code></li>
            </ul>
          </article>

          <article class="spec-card">
            <h4>Identifiers</h4>
            <p>If <code>identifier_exists</code> ≠ <code>no</code>, submit <code>gtin</code> or (<code>brand</code> + <code>mpn</code>). GTIN must pass GS1 checksum.</p>
          </article>

          <article class="spec-card">
            <h4>Apparel (US) <span class="req">Profile</span></h4>
            <p><code>item_group_id</code>, <code>color</code>, <code>gender</code>, <code>age_group</code>, <code>size</code>. Variants must differ by color/size/material/pattern/age_group/gender.</p>
          </article>

          <article class="spec-card">
            <h4>Local Inventory (US) <span class="req">Profile</span></h4>
            <p><code>id</code>, <code>store_code</code>, <code>price</code>, <code>availability</code>. Recommended: <code>quantity</code>, <code>pickup_method</code>, <code>pickup_sla</code>.</p>
          </article>
        </div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
